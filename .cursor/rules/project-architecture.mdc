# CactusDashboard - Arquitectura y Principios Fundamentales

## ğŸ—ï¸ **Arquitectura General**

CactusDashboard es una plataforma FinTech de gestiÃ³n de riqueza con arquitectura moderna:

- **Frontend**: Next.js 15.4.1 + TypeScript + shadcn/ui + Tailwind CSS
- **Backend**: FastAPI + SQLModel + Pydantic + ARQ (Redis)
- **Base de Datos**: PostgreSQL
- **ContenerizaciÃ³n**: Docker + Docker Compose
- **Testing**: Jest + Playwright + pytest
- **Infraestructura**: AWS EC2 + Terraform

## ğŸ“ **Estructura del Proyecto**

### Backend (`cactus-wealth-backend/`)
```
src/cactus_wealth/
â”œâ”€â”€ api/v1/endpoints/     # Endpoints de la API
â”œâ”€â”€ core/                 # ConfiguraciÃ³n central (config.py, arq.py)
â”œâ”€â”€ repositories/         # Capa de acceso a datos
â”œâ”€â”€ services/            # LÃ³gica de negocio
â”œâ”€â”€ models.py            # Modelos SQLModel
â”œâ”€â”€ schemas.py           # Esquemas Pydantic
â””â”€â”€ main.py              # Punto de entrada
```

### Frontend (`cactus-wealth-frontend/`)
```
app/
â”œâ”€â”€ dashboard/           # Dashboard principal
â”œâ”€â”€ clients/            # GestiÃ³n de clientes
â”œâ”€â”€ portfolios/         # GestiÃ³n de portafolios
â”œâ”€â”€ auth/              # AutenticaciÃ³n OAuth
â””â”€â”€ components/        # Componentes reutilizables
```

### Infraestructura (`terraform/`)
```
terraform/
â”œâ”€â”€ main.tf             # ConfiguraciÃ³n principal
â”œâ”€â”€ terraform.tfvars    # Variables de entorno
â”œâ”€â”€ user-data.sh        # Script de inicializaciÃ³n
â””â”€â”€ lambda/             # Funciones Lambda
```

## ğŸš€ **Comandos Principales**

### Desarrollo Local
```bash
# Iniciar servicios
task docker:up

# Ejecutar tests
task test:all

# Validar configuraciÃ³n
task validate:aws
```

### Despliegue AWS
```bash
# Desplegar a AWS
task deploy:aws

# Verificar estado
aws ec2 describe-instances --instance-ids i-0913b3f472d7001ef
```

## ğŸ”§ **ConfiguraciÃ³n de ProducciÃ³n**

### URLs de ProducciÃ³n
- **Frontend**: http://34.195.179.168:3000
- **Backend**: http://34.195.179.168:8000
- **API Docs**: http://34.195.179.168:8000/docs
- **SSH**: `ssh -i cactus-key.pem ubuntu@34.195.179.168`

### Presupuesto y Monitoreo
- **Instancia**: t4g.small (Free Tier hasta 31-dic-2025)
- **Auto-downgrade**: t4g.micro (01-ene-2026 00:15 UTC)
- **Presupuesto**: $75 USD/mes (95% alerta = $71.25)
- **RegiÃ³n**: us-east-1

## ğŸ“š **Archivos Clave**

### ConfiguraciÃ³n
- [Taskfile.yml](mdc:Taskfile.yml) - Comandos de automatizaciÃ³n
- [terraform/main.tf](mdc:terraform/main.tf) - Infraestructura AWS
- [terraform/terraform.tfvars](mdc:terraform/terraform.tfvars) - Variables de entorno

### DocumentaciÃ³n
- [CACTUS_MEMORY.md](mdc:CACTUS_MEMORY.md) - Memoria del proyecto
- [MONITORING-RUNBOOK.md](mdc:MONITORING-RUNBOOK.md) - Procedimientos operacionales
- [README.md](mdc:README.md) - GuÃ­a de inicio rÃ¡pido

### AplicaciÃ³n
- [cactus-wealth-backend/src/cactus_wealth/main.py](mdc:cactus-wealth-backend/src/cactus_wealth/main.py) - Backend entry point
- [cactus-wealth-frontend/app/layout.tsx](mdc:cactus-wealth-frontend/app/layout.tsx) - Frontend layout
- [config/docker/docker-compose.yml](mdc:config/docker/docker-compose.yml) - Contenedores

## ğŸ¯ **Principios de Desarrollo**

1. **Arquitectura Limpia**: SeparaciÃ³n clara de capas
2. **Type Safety**: TypeScript + Pydantic end-to-end
3. **Testing First**: Cobertura completa de tests
4. **Infrastructure as Code**: Terraform para AWS
5. **Cost Optimization**: Free Tier + auto-downgrade
6. **Security First**: OAuth + HTTPS + Firewall
